<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>ç¥–å…ˆä¸šåŠ›æ¢æµ‹ | ä¸“ä¸šèƒ½é‡ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a0f1a 0%, #2d1b2d 50%, #1f2b3a 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* èƒ½é‡ç²’å­èƒŒæ™¯ */
        .energy-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: rgba(255, 215, 0, 0.15);
            border-radius: 50%;
            filter: blur(3px);
            animation: float 20s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-20px) translateX(10px); }
            50% { transform: translateY(10px) translateX(-15px); }
            75% { transform: translateY(-10px) translateX(20px); }
        }

        /* ç¥–å…ˆèƒ½é‡åœˆ */
        .ancestral-circle {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vmin;
            height: 80vmin;
            border: 2px solid rgba(212, 175, 55, 0.1);
            border-radius: 50%;
            animation: circleRotate 60s linear infinite;
            z-index: 0;
        }

        .ancestral-circle::before,
        .ancestral-circle::after {
            content: '';
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            border: 2px solid rgba(212, 175, 55, 0.05);
            border-radius: 50%;
            animation: circlePulse 8s infinite;
        }

        @keyframes circleRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes circlePulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        /* é¡µé¢å®¹å™¨ */
        .page {
            position: relative;
            z-index: 10;
            max-width: 800px;
            width: 100%;
            background: rgba(20, 10, 20, 0.85);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(212, 175, 55, 0.25);
            border-radius: 48px;
            padding: 45px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
            transition: opacity 0.5s ease;
            display: none;
        }

        .page.active {
            display: block;
            animation: pageAppear 0.5s ease-out;
        }

        @keyframes pageAppear {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å¼€å§‹é¡µæ ·å¼ */
        .pre-title {
            color: #d4af37;
            font-size: 14px;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 16px;
            font-weight: 300;
            text-align: center;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        h1 {
            color: #fff;
            font-size: 42px;
            font-weight: 600;
            margin-bottom: 16px;
            line-height: 1.2;
            text-align: center;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .title-underline {
            width: 80px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #d4af37, transparent);
            margin: 0 auto 30px;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 18px;
            margin: 20px 0 30px;
            line-height: 1.6;
            font-weight: 300;
            text-align: center;
        }

        .dimension-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 40px 0;
        }

        .dimension-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 20px;
            padding: 15px 8px;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .dimension-card:hover {
            transform: translateY(-5px);
            border-color: rgba(212, 175, 55, 0.5);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3), 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .dimension-icon {
            font-size: 28px;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 8px #d4af37);
        }

        .dimension-card h3 {
            color: #d4af37;
            font-size: 14px;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .dimension-card p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 10px;
            line-height: 1.3;
        }

        .info-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 100px;
            padding: 15px 25px;
            margin: 30px 0;
            border: 1px solid rgba(212, 175, 55, 0.15);
        }

        .info-item {
            display: flex;
            align-items: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        .info-icon {
            margin-right: 8px;
            font-size: 18px;
        }

        .primary-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            border: none;
            border-radius: 100px;
            color: #1a0f1a;
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3), 0 0 30px rgba(212, 175, 55, 0.3);
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 40px rgba(212, 175, 55, 0.5);
        }

        .privacy-note {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 12px;
        }

        /* ç­”é¢˜é¡µæ ·å¼ */
        .progress-section {
            margin-bottom: 40px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        .question-counter {
            background: rgba(212, 175, 55, 0.1);
            padding: 8px 16px;
            border-radius: 100px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #d4af37;
        }

        .energy-bar-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 100px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.2);
        }

        .energy-bar-fill {
            height: 100%;
            width: 5%;
            background: linear-gradient(90deg, #d4af37, #f9e076, #d4af37);
            border-radius: 100px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px #d4af37;
        }

        .energy-percentage {
            text-align: right;
            margin-top: 8px;
            color: #d4af37;
            font-size: 14px;
        }

        .dimension-tag {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(212, 175, 55, 0.15);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 100px;
            color: #d4af37;
            font-size: 14px;
            margin-bottom: 24px;
        }

        .question-text {
            color: white;
            font-size: 24px;
            line-height: 1.5;
            margin-bottom: 40px;
            font-weight: 400;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 30px;
        }

        .option-item {
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(212, 175, 55, 0.15);
            border-radius: 100px;
            padding: 18px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            display: flex;
            align-items: center;
            position: relative;
        }

        .option-item:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: rgba(212, 175, 55, 0.5);
            transform: translateX(10px);
        }

        .option-item.selected {
            background: rgba(212, 175, 55, 0.2);
            border-color: #d4af37;
            color: #fff;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(212, 175, 55, 0.3);
            margin-right: 16px;
            transition: all 0.3s ease;
        }

        .option-item.selected .option-marker {
            background: #d4af37;
            box-shadow: 0 0 20px #d4af37;
            border-color: #d4af37;
        }

        .energy-note {
            margin-left: auto;
            font-size: 12px;
            color: rgba(212, 175, 55, 0.5);
            font-style: italic;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .nav-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 100px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .nav-btn:not(:disabled):hover {
            background: rgba(212, 175, 55, 0.15);
            color: #fff;
            border-color: #d4af37;
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .next-btn {
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            color: #1a0f1a;
            border: none;
            font-weight: 600;
            min-width: 140px;
        }

        .energy-tip {
            text-align: center;
            margin-top: 20px;
            color: rgba(255, 255, 255, 0.3);
            font-size: 12px;
        }

        /* ç»“æœé¡µæ ·å¼ - å¢å¼ºç‰ˆ */
        .result-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .result-badge {
            display: inline-block;
            padding: 8px 24px;
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            border-radius: 100px;
            color: #1a0f1a;
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
        }

        .total-score {
            font-size: 64px;
            font-weight: 700;
            color: #d4af37;
            text-shadow: 0 0 30px #d4af37;
            line-height: 1;
            margin: 20px 0 10px;
        }

        .karma-type {
            font-size: 28px;
            color: white;
            background: rgba(212, 175, 55, 0.15);
            display: inline-block;
            padding: 8px 32px;
            border-radius: 100px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            margin-bottom: 10px;
        }

        .energy-level-desc {
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
            margin-top: 10px;
        }

        .radar-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 30px auto;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .dimension-breakdown {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 40px 0;
        }

        .dimension-result-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 20px;
            padding: 15px 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .dimension-result-card:hover {
            transform: translateY(-5px);
            border-color: #d4af37;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
        }

        .dimension-icon {
            font-size: 28px;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 10px #d4af37);
        }

        .dimension-name {
            color: #d4af37;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .dimension-score {
            font-size: 20px;
            color: white;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .dimension-level {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 100px;
            display: inline-block;
        }

        .level-verylow { background: rgba(76, 175, 80, 0.2); color: #4caf80; }
        .level-low { background: rgba(139, 195, 74, 0.2); color: #8bc34a; }
        .level-medium { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .level-high { background: rgba(255, 152, 0, 0.2); color: #ff9800; }
        .level-veryhigh { background: rgba(244, 67, 54, 0.2); color: #f44336; }

        /* èƒ½é‡åˆ†æåŒºå— */
        .energy-analysis-section {
            background: rgba(212, 175, 55, 0.05);
            border-radius: 32px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(212, 175, 55, 0.15);
        }

        .section-title {
            color: #d4af37;
            font-size: 22px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            padding-bottom: 15px;
        }

        .chakra-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 25px 0;
        }

        .chakra-item {
            text-align: center;
        }

        .chakra-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 0 20px currentColor;
        }

        .chakra-name {
            color: rgba(255, 255, 255, 0.7);
            font-size: 10px;
        }

        .energy-field-desc {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 25px 0;
        }

        .field-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 20px;
        }

        .field-item h4 {
            color: #d4af37;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .field-item p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            font-size: 14px;
        }

        .influence-list {
            list-style: none;
            padding: 0;
        }

        .influence-list li {
            color: rgba(255, 255, 255, 0.8);
            padding: 10px 0;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .influence-list li:last-child {
            border-bottom: none;
        }

        .influence-icon {
            font-size: 20px;
            min-width: 30px;
        }

        .blockage-item {
            background: rgba(244, 67, 54, 0.1);
            border-left: 3px solid #f44336;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 0 10px 10px 0;
        }

        /* å¾®ä¿¡æŒ‰é’® */
        .wechat-btn {
            width: 100%;
            padding: 22px;
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            border: none;
            border-radius: 100px;
            color: #1a0f1a;
            font-size: 22px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4);
            margin: 30px 0 15px;
            letter-spacing: 2px;
        }

        .wechat-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.6);
        }

        .wechat-hint {
            text-align: center;
            color: rgba(255, 255, 255, 0.4);
            font-size: 14px;
            margin-bottom: 20px;
        }

        .wechat-id {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 16px;
            border-radius: 100px;
            display: inline-block;
            color: #d4af37;
            font-family: monospace;
            font-size: 18px;
            letter-spacing: 2px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .secondary-btn {
            width: 100%;
            padding: 16px;
            background: transparent;
            border: 2px solid rgba(212, 175, 55, 0.5);
            border-radius: 100px;
            color: #d4af37;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .secondary-btn:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: #d4af37;
        }

        @media (max-width: 700px) {
            .page { padding: 30px 20px; }
            h1 { font-size: 32px; }
            .dimension-grid { grid-template-columns: repeat(5, 1fr); gap: 5px; }
            .dimension-card { padding: 10px 5px; }
            .dimension-card h3 { font-size: 11px; }
            .dimension-card p { font-size: 8px; }
            .dimension-breakdown { grid-template-columns: repeat(5, 1fr); gap: 5px; }
            .chakra-grid { grid-template-columns: repeat(7, 1fr); }
            .energy-field-desc { grid-template-columns: 1fr; }
            .question-text { font-size: 20px; }
            .option-item { padding: 15px 20px; font-size: 14px; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .shake {
            animation: shake 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <div class="energy-particles" id="particles"></div>
    <div class="ancestral-circle"></div>

    <!-- å¼€å§‹é¡µ -->
    <div id="page-start" class="page active">
        <div class="pre-title">ANCESTRAL KARMA Â· ä¸“ä¸šèƒ½é‡ç‰ˆ</div>
        <h1>ç¥–å…ˆä¸šåŠ›æ·±åº¦æ¢æµ‹</h1>
        <div class="title-underline"></div>
        <div class="subtitle">äºŒåäº”é“é€‰æ‹©é¢˜ Â· äº”å¤§èƒ½é‡ç»´åº¦<br>æµ‹å‡ºå®¶æ—èƒ½é‡å¯¹ä½ çš„æ·±å±‚å½±å“</div>

        <!-- äº”å¤§ç»´åº¦é¢„è§ˆ -->
        <div class="dimension-grid">
            <div class="dimension-card">
                <div class="dimension-icon">ğŸ”—</div>
                <h3>æƒ…æ„Ÿç»§æ‰¿</h3>
                <p>å®¶æ—æƒ…ç»ªæ¨¡å¼çš„æ‰¿æ¥</p>
            </div>
            <div class="dimension-card">
                <div class="dimension-icon">ğŸŒ€</div>
                <h3>æœªç«Ÿäº‹ä»¶</h3>
                <p>æœªè¢«å¤„ç†çš„å®¶æ—åˆ›ä¼¤</p>
            </div>
            <div class="dimension-card">
                <div class="dimension-icon">âš–ï¸</div>
                <h3>å¿ è¯šä»£ä»·</h3>
                <p>ä¸ºå½’å±ä»˜å‡ºçš„è‡ªæˆ‘å‹æŠ‘</p>
            </div>
            <div class="dimension-card">
                <div class="dimension-icon">ğŸ”’</div>
                <h3>å®¶æ—ç§˜å¯†</h3>
                <p>è¢«éšè—çš„èƒ½é‡å°è®°</p>
            </div>
            <div class="dimension-card">
                <div class="dimension-icon">âš¡</div>
                <h3>è„‰è½®å°è®°</h3>
                <p>èƒ½é‡ä¸­å¿ƒçš„å®¶æ—å µå¡</p>
            </div>
        </div>

        <div class="info-bar">
            <div class="info-item"><span class="info-icon">â±ï¸</span>12åˆ†é’Ÿ</div>
            <div class="info-item"><span class="info-icon">ğŸ“‹</span>25é¢˜</div>
            <div class="info-item"><span class="info-icon">ğŸ”’</span>åŒ¿å</div>
            <div class="info-item"><span class="info-icon">âœ¨</span>5ç»´èƒ½é‡</div>
        </div>

        <button class="primary-btn" onclick="showPage('test')">å¼€å§‹æ¢æµ‹ç¥–å…ˆèƒ½é‡</button>
        <div class="privacy-note">âš¡ ç»“æœä»…ä½ å¯è§ Â· ä¸“ä¸šèƒ½é‡åˆ†æ Â· åŠ å¯†å­˜å‚¨</div>
    </div>

    <!-- ç­”é¢˜é¡µ -->
    <div id="page-test" class="page">
        <div class="progress-section">
            <div class="progress-header">
                <span class="question-counter" id="questionCounter">ç¬¬ 1 / 25 é¢˜</span>
                <span id="dimensionDisplay" style="color: #d4af37;">æƒ…æ„Ÿç»§æ‰¿</span>
            </div>
            <div class="energy-bar-container">
                <div class="energy-bar-fill" id="progressBar" style="width: 4%;"></div>
            </div>
            <div class="energy-percentage" id="energyPercentage">èƒ½é‡é‡Šæ”¾ 4%</div>
        </div>

        <div class="question-section">
            <div class="dimension-tag" id="dimensionTag">ğŸ”— æƒ…æ„Ÿç»§æ‰¿</div>
            <div class="question-text" id="questionText">åŠ è½½ä¸­...</div>

            <div class="options-grid" id="optionsContainer"></div>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn" onclick="prevQuestion()" disabled>â† ä¸Šä¸€é¢˜</button>
                <button class="nav-btn next-btn" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â†’</button>
            </div>

            <div class="energy-tip">âš¡ è·Ÿéšç›´è§‰é€‰æ‹©ï¼Œæ„Ÿå—èƒ½é‡çš„æµåŠ¨</div>
        </div>
    </div>

    <!-- ç»“æœé¡µ - å¢å¼ºç‰ˆ -->
    <div id="page-result" class="page">
        <div class="result-header">
            <div class="result-badge">ç¥–å…ˆèƒ½é‡è§£ç å®Œæˆ</div>
            <h1>ä½ çš„å®¶æ—èƒ½é‡å›¾è°±</h1>
            <div class="total-score" id="totalScore">0</div>
            <div class="karma-type" id="karmaType">è‡ªç”±ä¹‹å­ Â· è½»ç›ˆå‹</div>
            <div class="energy-level-desc" id="energyLevelDesc">ç¥–å…ˆç¥ç¦å¤§äºä¸šåŠ›è´Ÿæ‹…ï¼Œä½ ä¸»è¦æ‰¿æ¥çš„æ˜¯å®¶æ—çš„èƒ½é‡é¦ˆèµ </div>
        </div>

        <!-- äº”ç»´é›·è¾¾å›¾ -->
        <div class="radar-container">
            <canvas id="radarChart" width="350" height="350"></canvas>
        </div>

        <!-- äº”ç»´å¾—åˆ†å¡ç‰‡ -->
        <div class="dimension-breakdown" id="dimensionCards"></div>

        <!-- èƒ½é‡æ·±åº¦åˆ†æ -->
        <div class="energy-analysis-section">
            <div class="section-title">
                <span>ğŸ”® èƒ½é‡åœºæ·±åº¦åˆ†æ</span>
            </div>
            
            <!-- è„‰è½®çŠ¶æ€ -->
            <h3 style="color: #d4af37; margin-bottom: 15px;">âŠ™ è„‰è½®èƒ½é‡å°è®°</h3>
            <div class="chakra-grid" id="chakraGrid"></div>
            
            <!-- èƒ½é‡åœºçŠ¶æ€ -->
            <div class="energy-field-desc">
                <div class="field-item">
                    <h4>ğŸŒŒ ä¸ªäººèƒ½é‡åœºçŠ¶æ€</h4>
                    <p id="energyFieldState">ä½ çš„èƒ½é‡åœºæ•´ä½“æ˜äº®æ¸…æ™°ï¼Œä¸­å¿ƒç¨³å®šï¼Œæœ‰å°‘é‡å®¶æ—èƒ½é‡å°è®°ï¼Œä½†ä¸å½±å“ä¸»è¦èƒ½é‡æµåŠ¨ã€‚</p>
                </div>
                <div class="field-item">
                    <h4>ğŸ‘¥ å®¶æ—èƒ½é‡çº ç¼ ç‚¹</h4>
                    <p id="energyEntanglement">ä¸»è¦çº ç¼ åœ¨ç¬¬ä¸‰ä»£çˆ¶ç³»å®¶æ—çš„æƒ…ç»ªæ¨¡å¼ä¸Šï¼Œéœ€è¦æ„è¯†å±‚é¢çš„è§‰å¯Ÿä¸åˆ†ç¦»ã€‚</p>
                </div>
            </div>
            
            <!-- å…·ä½“å½±å“ -->
            <h3 style="color: #d4af37; margin: 25px 0 15px;">ğŸ“‹ å®¶æ—èƒ½é‡å¯¹ä½ çš„å…·ä½“å½±å“</h3>
            <ul class="influence-list" id="influenceList"></ul>
            
            <!-- èƒ½é‡å µå¡ç‚¹ -->
            <h3 style="color: #d4af37; margin: 25px 0 15px;">âš ï¸ éœ€è¦ç•™æ„çš„èƒ½é‡å µå¡</h3>
            <div id="blockagePoints"></div>
        </div>

        <!-- ä»˜è´¹è§£è¯»æŒ‰é’® -->
        <button class="wechat-btn" onclick="copyWechat()">ğŸ’° ä»˜è´¹998å…ƒ æ·»åŠ å¾®ä¿¡è·å–1å¯¹1æ·±åº¦è§£è¯»</button>
        <div class="wechat-hint">
            <span>å¤åˆ¶å¾®ä¿¡å·ï¼š</span>
            <span class="wechat-id" id="wechatId">lfhy771</span>
            <span style="margin-left: 10px; cursor: pointer;" onclick="copyWechat()">ğŸ“‹ å¤åˆ¶</span>
        </div>
        
        <button class="secondary-btn" onclick="restartTest()">é‡æ–°æµ‹è¯•</button>
        <div class="privacy-note">âš¡ ä¸“ä¸šèƒ½é‡åˆ†æ Â· ä¸€å¯¹ä¸€æ·±åº¦è§£è¯» Â· åŒ¿åå’¨è¯¢</div>
    </div>

    <script>
        // ==================== å…¨å±€å˜é‡ ====================
        let currentPage = 'start';
        let currentQuestionIndex = 0;
        let answers = {};

        // é¢˜ç›®æ•°æ® - 25é¢˜ï¼Œ5ä¸ªç»´åº¦å„5é¢˜
        const questions = [
            // ç»´åº¦1: æƒ…æ„Ÿç»§æ‰¿ (1-5)
            { id: 1, dimension: "emotion", dimensionName: "æƒ…æ„Ÿç»§æ‰¿", icon: "ğŸ”—", text: "ä½ æ˜¯å¦ç»å¸¸æ„Ÿå—åˆ°è«åçš„æƒ…ç»ªï¼ˆæ‚²ä¼¤ã€æ„¤æ€’ã€ææƒ§ï¼‰å´ä¸çŸ¥æ¥æºï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æƒ…ç»ªè‡ªä¸»" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®æ‰¿æ¥" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "å¶å°”æ‰¿æ¥" },
                { value: 4, label: "ç»å¸¸", energyNote: "æ˜æ˜¾æ‰¿æ¥" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æ·±åº¦æ‰¿æ¥" }
            ]},
            { id: 2, dimension: "emotion", dimensionName: "æƒ…æ„Ÿç»§æ‰¿", icon: "ğŸ”—", text: "ä½ çš„æƒ…ç»ªæ¨¡å¼æ˜¯å¦å’ŒæŸä½å®¶æ—æˆå‘˜ï¼ˆçˆ¶æ¯/ç¥–çˆ¶æ¯ï¼‰æƒŠäººåœ°ç›¸ä¼¼ï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨ä¸åŒ", energyNote: "è‡ªæˆ‘æ¨¡å¼" },
                { value: 2, label: "ç¨æœ‰ç›¸ä¼¼", energyNote: "è½»å¾®å½±å“" },
                { value: 3, label: "æœ‰äº›ç›¸ä¼¼", energyNote: "éƒ¨åˆ†ç»§æ‰¿" },
                { value: 4, label: "éå¸¸ç›¸ä¼¼", energyNote: "æ˜æ˜¾ç»§æ‰¿" },
                { value: 5, label: "å‡ ä¹ä¸€æ ·", energyNote: "å®Œå…¨å¤åˆ¶" }
            ]},
            { id: 3, dimension: "emotion", dimensionName: "æƒ…æ„Ÿç»§æ‰¿", icon: "ğŸ”—", text: "åœ¨å®¶æ—èšä¼šåï¼Œä½ æ˜¯å¦å¸¸æ„Ÿåˆ°æƒ…ç»ªä½è½æˆ–èƒ½é‡è¢«æŠ½ç©ºï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "èƒ½é‡ç‹¬ç«‹" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "å¶å°”æ¶ˆè€—" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾æ¶ˆè€—" },
                { value: 4, label: "ç»å¸¸", energyNote: "ä¸¥é‡æ¶ˆè€—" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "èƒ½é‡é»‘æ´" }
            ]},
            { id: 4, dimension: "emotion", dimensionName: "æƒ…æ„Ÿç»§æ‰¿", icon: "ğŸ”—", text: "ä½ æ˜¯å¦æ‰¿æ‹…ç€è®©å®¶æ—â€œå¼€å¿ƒâ€ã€â€œå’Œè°â€çš„è´£ä»»æ„Ÿï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æƒ…ç»ªè‡ªç”±" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®è´Ÿè´£" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾è´Ÿè´£" },
                { value: 4, label: "ç»å¸¸", energyNote: "è¿‡åº¦è´Ÿè´£" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æƒ…ç»ªæ‰¿æ‹…è€…" }
            ]},
            { id: 5, dimension: "emotion", dimensionName: "æƒ…æ„Ÿç»§æ‰¿", icon: "ğŸ”—", text: "å®¶æ—ä¸­æ˜¯å¦æœ‰å‹æŠ‘æƒ…ç»ªã€ä¸å…è®¸è¡¨è¾¾æƒ…æ„Ÿçš„ä¼ ç»Ÿï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨æ²¡æœ‰", energyNote: "æƒ…æ„Ÿå¼€æ”¾" },
                { value: 2, label: "ä¸å¤ªæ˜æ˜¾", energyNote: "è½»å¾®å‹æŠ‘" },
                { value: 3, label: "æœ‰äº›å‹æŠ‘", energyNote: "éƒ¨åˆ†å‹æŠ‘" },
                { value: 4, label: "æ¯”è¾ƒæ˜æ˜¾", energyNote: "æ˜æ˜¾å‹æŠ‘" },
                { value: 5, label: "éå¸¸ä¸¥é‡", energyNote: "æƒ…æ„Ÿå†»ç»“" }
            ]},
            
            // ç»´åº¦2: æœªç«Ÿäº‹ä»¶ (6-10)
            { id: 6, dimension: "unfinished", dimensionName: "æœªç«Ÿäº‹ä»¶", icon: "ğŸŒ€", text: "å®¶æ—ä¸­æ˜¯å¦æœ‰é‡å¤§åˆ›ä¼¤æœªè¢«è°ˆè®ºï¼ˆæˆ˜äº‰ã€é¥¥è’ã€æ„å¤–ã€æµäº§ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰", energyNote: "å†å²å¹³é™" },
                { value: 2, label: "ä¸å¤ªæ¸…æ¥š", energyNote: "æ½œåœ¨é—å¿˜" },
                { value: 3, label: "å¬è¯´è¿‡", energyNote: "éšçº¦å­˜åœ¨" },
                { value: 4, label: "æœ‰ï¼Œå¾ˆå°‘æ", energyNote: "æœªç«Ÿèƒ½é‡" },
                { value: 5, label: "æœ‰ï¼Œå½±å“å¤§", energyNote: "æ²‰é‡åˆ›ä¼¤" }
            ]},
            { id: 7, dimension: "unfinished", dimensionName: "æœªç«Ÿäº‹ä»¶", icon: "ğŸŒ€", text: "ä½ æ˜¯å¦å¯¹æŸäº›å†å²æ—¶æœŸæœ‰è«åçš„ææƒ§æˆ–æƒ…ç»ªååº”ï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨æ²¡æœ‰", energyNote: "å½“ä¸‹ç”Ÿæ´»" },
                { value: 2, label: "ä¸å¤ªæœ‰", energyNote: "è½»å¾®è¿æ¥" },
                { value: 3, label: "æœ‰ä¸€ç‚¹", energyNote: "èƒ½é‡å°è®°" },
                { value: 4, label: "æ¯”è¾ƒå¼ºçƒˆ", energyNote: "æ˜æ˜¾æ‰¿æ¥" },
                { value: 5, label: "éå¸¸å¼ºçƒˆ", energyNote: "åˆ›ä¼¤é‡ç°" }
            ]},
            { id: 8, dimension: "unfinished", dimensionName: "æœªç«Ÿäº‹ä»¶", icon: "ğŸŒ€", text: "ä½ çš„æ¢¦å¢ƒä¸­æ˜¯å¦å‡ºç°è¿‡ä¸è®¤è¯†ä½†æ„Ÿè§‰äº²åˆ‡çš„â€œå®¶äººâ€ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æ¢¦å¢ƒæ¸…å‡€" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "å¶å°”è¿æ¥" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "èƒ½é‡æ˜¾ç°" },
                { value: 4, label: "ç»å¸¸", energyNote: "é¢‘ç¹è¿æ¥" },
                { value: 5, label: "åå¤å‡ºç°", energyNote: "æ·±å±‚çº ç¼ " }
            ]},
            { id: 9, dimension: "unfinished", dimensionName: "æœªç«Ÿäº‹ä»¶", icon: "ğŸŒ€", text: "å®¶æ—ä¸­æ˜¯å¦æœ‰è¢«æ’é™¤ã€é—å¿˜ã€ä¸å…è®¸æèµ·çš„äººï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰", energyNote: "å®¶æ—å®Œæ•´" },
                { value: 2, label: "ä¸å¤ªæ¸…æ¥š", energyNote: "æ½œåœ¨é—å¿˜" },
                { value: 3, label: "å¬è¯´è¿‡", energyNote: "éšçº¦å­˜åœ¨" },
                { value: 4, label: "çŸ¥é“ä½†ä¸è°ˆ", energyNote: "æ˜æ˜¾ç¦å¿Œ" },
                { value: 5, label: "æœ‰ï¼Œä¸”æ˜¯ç§˜å¯†", energyNote: "æ²‰é‡é˜´å½±" }
            ]},
            { id: 10, dimension: "unfinished", dimensionName: "æœªç«Ÿäº‹ä»¶", icon: "ğŸŒ€", text: "ä½ æ˜¯å¦å¯¹æŸäº›åœ°æ–¹æœ‰è¯´ä¸æ¸…çš„å½’å±æ„Ÿæˆ–æ’æ–¥æ„Ÿï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰æ„Ÿè§‰", energyNote: "èƒ½é‡ä¸­æ€§" },
                { value: 2, label: "å¾ˆæ·¡", energyNote: "å¾®å¼±è¿æ¥" },
                { value: 3, label: "æœ‰ç‚¹æ„Ÿè§‰", energyNote: "æƒ…æ„Ÿå°è®°" },
                { value: 4, label: "æ¯”è¾ƒå¼º", energyNote: "èƒ½é‡ç‰µå¼•" },
                { value: 5, label: "éå¸¸å¼ºçƒˆ", energyNote: "æ ¹æºçº ç¼ " }
            ]},
            
            // ç»´åº¦3: å¿ è¯šä»£ä»· (11-15)
            { id: 11, dimension: "loyalty", dimensionName: "å¿ è¯šä»£ä»·", icon: "âš–ï¸", text: "ä½ æ˜¯å¦è§‰å¾—æ´»å‡ºè‡ªå·±ä¼šè®©å®¶äººå¤±æœ›æˆ–èƒŒå›å®¶æ—ï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨ä¸è§‰å¾—", energyNote: "è‡ªæˆ‘å®Œæ•´" },
                { value: 2, label: "ä¸å¤ªè§‰å¾—", energyNote: "è½»å¾®é¡¾è™‘" },
                { value: 3, label: "æœ‰ç‚¹è§‰å¾—", energyNote: "å†…å¿ƒå†²çª" },
                { value: 4, label: "æ¯”è¾ƒè§‰å¾—", energyNote: "æ˜æ˜¾å‹æŠ‘" },
                { value: 5, label: "éå¸¸è§‰å¾—", energyNote: "è‡ªæˆ‘ç‰ºç‰²" }
            ]},
            { id: 12, dimension: "loyalty", dimensionName: "å¿ è¯šä»£ä»·", icon: "âš–ï¸", text: "ä½ æ˜¯å¦åœ¨é‡å¤æŸä¸ªå®¶æ—æˆå‘˜çš„å‘½è¿ï¼ˆå©šå§»/äº‹ä¸š/å¥åº·ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨ä¸åŒ", energyNote: "è‡ªä¸»äººç”Ÿ" },
                { value: 2, label: "ç¨æœ‰ç›¸ä¼¼", energyNote: "å¶ç„¶å·§åˆ" },
                { value: 3, label: "æœ‰äº›ç›¸ä¼¼", energyNote: "æ¨¡å¼é‡å¤" },
                { value: 4, label: "éå¸¸ç›¸ä¼¼", energyNote: "æ˜æ˜¾å¤åˆ¶" },
                { value: 5, label: "å‡ ä¹ä¸€æ ·", energyNote: "å‘½è¿é‡æ¼”" }
            ]},
            { id: 13, dimension: "loyalty", dimensionName: "å¿ è¯šä»£ä»·", icon: "âš–ï¸", text: "ä½ æ˜¯å¦æœ‰â€œä¸èƒ½æ¯”çˆ¶æ¯è¿‡å¾—æ›´å¥½â€çš„å†…ç–šæ„Ÿï¼Ÿ", options: [
                { value: 1, label: "ä»æ¥æ²¡æœ‰", energyNote: "èƒ½é‡è‡ªç”±" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®è§‰å¯Ÿ" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "éœ€è¦ç•™æ„" },
                { value: 4, label: "ç»å¸¸", energyNote: "æ˜æ˜¾è´Ÿæ‹…" },
                { value: 5, label: "æ€»æ˜¯å¦‚æ­¤", energyNote: "æ·±åº¦å¿ è¯š" }
            ]},
            { id: 14, dimension: "loyalty", dimensionName: "å¿ è¯šä»£ä»·", icon: "âš–ï¸", text: "ä½ æ˜¯å¦æ‰¿æ‹…ç€è®©å®¶æ—â€œå®Œæ•´â€ã€â€œä¿®å¤â€çš„ä½¿å‘½ï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰", energyNote: "è‡ªæˆ‘ç”Ÿæ´»" },
                { value: 2, label: "è½»å¾®æ„Ÿè§‰", energyNote: "éšçº¦ä½¿å‘½" },
                { value: 3, label: "æœ‰äº›æ„Ÿè§‰", energyNote: "éƒ¨åˆ†æ‰¿æ‹…" },
                { value: 4, label: "æ˜æ˜¾æ„Ÿè§‰", energyNote: "è¿‡åº¦æ‰¿æ‹…" },
                { value: 5, label: "è¿™æ˜¯æˆ‘çš„äººç”Ÿ", energyNote: "å®Œå…¨èƒŒè´Ÿ" }
            ]},
            { id: 15, dimension: "loyalty", dimensionName: "å¿ è¯šä»£ä»·", icon: "âš–ï¸", text: "ä½ çš„æˆåŠŸæ˜¯å¦å¸¸ä¼´éšè«åçš„ç ´åæˆ–å¤±å»ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "é…å¾—æˆåŠŸ" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "å¶å°”ç ´å" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾æ¨¡å¼" },
                { value: 4, label: "ç»å¸¸", energyNote: "å¼ºçƒˆæ¨¡å¼" },
                { value: 5, label: "æ€»æ˜¯å¦‚æ­¤", energyNote: "æˆåŠŸç¦å¿Œ" }
            ]},
            
            // ç»´åº¦4: å®¶æ—ç§˜å¯† (16-20) - æ”¹ä¸ºğŸ”’å›¾æ ‡
            { id: 16, dimension: "secret", dimensionName: "å®¶æ—ç§˜å¯†", icon: "ğŸ”’", text: "ä½ æ˜¯å¦èƒ½æ„Ÿè§‰åˆ°å®¶æ—ä¸­æœ‰æœªè¢«è¨€è¯´çš„ç§˜å¯†ï¼Ÿ", options: [
                { value: 1, label: "å®Œå…¨æ²¡æœ‰", energyNote: "èƒ½é‡æ¸…æ˜" },
                { value: 2, label: "ä¸å¤ªæœ‰", energyNote: "å¶å°”æ„ŸçŸ¥" },
                { value: 3, label: "æœ‰ç‚¹æ„Ÿè§‰", energyNote: "éšçº¦å­˜åœ¨" },
                { value: 4, label: "æ¯”è¾ƒæ¸…æ¥š", energyNote: "æ˜æ˜¾æ„ŸçŸ¥" },
                { value: 5, label: "éå¸¸æ¸…æ¥š", energyNote: "æ·±åº¦è¿æ¥" }
            ]},
            { id: 17, dimension: "secret", dimensionName: "å®¶æ—ç§˜å¯†", icon: "ğŸ”’", text: "å®¶ä¸­æ˜¯å¦æœ‰äº›è¯é¢˜æ˜¯ç»å¯¹ä¸èƒ½æèµ·çš„ï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰", energyNote: "å¼€æ”¾äº¤æµ" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "å°‘é‡ç¦å¿Œ" },
                { value: 3, label: "æœ‰äº›è¯é¢˜", energyNote: "éƒ¨åˆ†å°é—­" },
                { value: 4, label: "å¾ˆå¤šè¯é¢˜", energyNote: "æ˜æ˜¾å°é—­" },
                { value: 5, label: "å‡ ä¹æ‰€æœ‰", energyNote: "å®Œå…¨å°é—­" }
            ]},
            { id: 18, dimension: "secret", dimensionName: "å®¶æ—ç§˜å¯†", icon: "ğŸ”’", text: "ä½ æ˜¯å¦å¯¹å®¶æ—å†å²æœ‰å¼ºçƒˆçš„æ¢çŸ¥æ¬²ï¼Œä½†åˆæ„Ÿåˆ°ææƒ§ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "å¹³é™é¢å¯¹" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®å¥½å¥‡" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾å¥½å¥‡" },
                { value: 4, label: "ç»å¸¸", energyNote: "å¼ºçƒˆæ¢çŸ¥" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æ‰§å¿µæ¢çŸ¥" }
            ]},
            { id: 19, dimension: "secret", dimensionName: "å®¶æ—ç§˜å¯†", icon: "ğŸ”’", text: "ä½ æ˜¯å¦æ„Ÿè§‰æŸäº›å®¶æ—ç§˜å¯†åœ¨æ¢¦ä¸­æˆ–ç›´è§‰ä¸­å‘ä½ æ˜¾ç°ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æ— è§‰çŸ¥" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "å¶å°”æ˜¾ç°" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "éƒ¨åˆ†æ˜¾ç°" },
                { value: 4, label: "ç»å¸¸", energyNote: "é¢‘ç¹æ˜¾ç°" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æŒç»­æ˜¾ç°" }
            ]},
            { id: 20, dimension: "secret", dimensionName: "å®¶æ—ç§˜å¯†", icon: "ğŸ”’", text: "å®¶æ—ä¸­æ˜¯å¦æœ‰çªç„¶æ¶ˆå¤±ã€æ–­ç»å…³ç³»çš„æˆå‘˜ï¼Ÿ", options: [
                { value: 1, label: "æ²¡æœ‰", energyNote: "å®¶æ—å®Œæ•´" },
                { value: 2, label: "ä¸å¤ªæ¸…æ¥š", energyNote: "æ½œåœ¨é—å¿˜" },
                { value: 3, label: "å¬è¯´è¿‡", energyNote: "éšçº¦å­˜åœ¨" },
                { value: 4, label: "æœ‰ï¼ŒåŸå› ä¸æ˜", energyNote: "æœªè§£ä¹‹è°œ" },
                { value: 5, label: "æœ‰ï¼Œå½±å“è‡³ä»Š", energyNote: "èƒ½é‡æ–­è£‚" }
            ]},
            
            // ç»´åº¦5: è„‰è½®å°è®° (21-25)
            { id: 21, dimension: "chakra", dimensionName: "è„‰è½®å°è®°", icon: "âš¡", text: "ä½ æ˜¯å¦å¸¸æ„Ÿåˆ°è«åçš„ææƒ§ã€ä¸å®‰ï¼ˆå¯¹åº”æ ¹è½®ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æ ¹è½®ç¨³å®š" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®å µå¡" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾å µå¡" },
                { value: 4, label: "ç»å¸¸", energyNote: "ä¸¥é‡å µå¡" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æ ¹è½®å†»ç»“" }
            ]},
            { id: 22, dimension: "chakra", dimensionName: "è„‰è½®å°è®°", icon: "âš¡", text: "ä½ æ˜¯å¦å¸¸æ„Ÿåˆ°æƒ…æ„Ÿå‹æŠ‘ã€éš¾ä»¥å»ºç«‹äº²å¯†å…³ç³»ï¼ˆå¯¹åº”å¿ƒè½®ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "å¿ƒè½®å¼€æ”¾" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®å°é—­" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾å°é—­" },
                { value: 4, label: "ç»å¸¸", energyNote: "ä¸¥é‡å°é—­" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "å¿ƒè½®å†»ç»“" }
            ]},
            { id: 23, dimension: "chakra", dimensionName: "è„‰è½®å°è®°", icon: "âš¡", text: "ä½ æ˜¯å¦éš¾ä»¥è¡¨è¾¾çœŸå®çš„è‡ªå·±ï¼Œæ€»æ„Ÿè§‰è¢«å‹åˆ¶ï¼ˆå¯¹åº”å–‰è½®ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "å–‰è½®ç•…é€š" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®å‹åˆ¶" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾å‹åˆ¶" },
                { value: 4, label: "ç»å¸¸", energyNote: "ä¸¥é‡å‹åˆ¶" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "å–‰è½®å†»ç»“" }
            ]},
            { id: 24, dimension: "chakra", dimensionName: "è„‰è½®å°è®°", icon: "âš¡", text: "ä½ æ˜¯å¦å¸¸æ„Ÿåˆ°æ— åŠ›ã€æ²¡æœ‰æ–¹å‘ï¼ˆå¯¹åº”å¤ªé˜³ç¥ç»ä¸›ï¼‰ï¼Ÿ", options: [
                { value: 1, label: "ä»ä¸", energyNote: "æœ¬æˆ‘å¼ºå¤§" },
                { value: 2, label: "å¾ˆå°‘", energyNote: "è½»å¾®æ— åŠ›" },
                { value: 3, label: "æœ‰æ—¶", energyNote: "æ˜æ˜¾æ— åŠ›" },
                { value: 4, label: "ç»å¸¸", energyNote: "ä¸¥é‡æ— åŠ›" },
                { value: 5, label: "æ€»æ˜¯", energyNote: "æœ¬æˆ‘å†»ç»“" }
            ]},
            { id: 25, dimension: "chakra", dimensionName: "è„‰è½®å°è®°", icon: "âš¡", text: "ä½ æ˜¯å¦æ„Ÿåˆ°ä¸å®¶æ—æ ¹æºçš„è¿æ¥æ„Ÿå¼‚å¸¸å¼ºçƒˆæˆ–å¼‚å¸¸æ–­è£‚ï¼Ÿ", options: [
                { value: 1, label: "é€‚ä¸­è¿æ¥", energyNote: "å¹³è¡¡" },
                { value: 2, label: "ç¨å¼±è¿æ¥", energyNote: "è½»å¾®æ–­è£‚" },
                { value: 3, label: "éå¸¸å¼ºçƒˆ", energyNote: "è¿‡åº¦è¿æ¥" },
                { value: 4, label: "éå¸¸æ–­è£‚", energyNote: "ä¸¥é‡æ–­è£‚" },
                { value: 5, label: "å®Œå…¨çº ç¼ ", energyNote: "æ— æ³•åˆ†ç¦»" }
            ]}
        ];

        // ==================== é¡µé¢åˆ‡æ¢ ====================
        window.showPage = function(pageName) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            const targetPage = document.getElementById('page-' + pageName);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageName;
            }
            
            // æ ¹æ®é¡µé¢æ‰§è¡Œåˆå§‹åŒ–
            if (pageName === 'test') {
                currentQuestionIndex = 0;
                answers = {};
                loadQuestion(0);
                updateProgress();
            } else if (pageName === 'result') {
                displayResults();
            }
        };

        // ==================== ç­”é¢˜é¡µé€»è¾‘ ====================
        function loadQuestion(index) {
            const q = questions[index];
            
            document.getElementById('questionCounter').innerHTML = 'ç¬¬ ' + (index + 1) + ' / 25 é¢˜';
            
            const dimensionTag = document.getElementById('dimensionTag');
            dimensionTag.innerHTML = q.icon + ' ' + q.dimensionName;
            
            document.getElementById('questionText').innerText = q.text;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            for (let i = 0; i < q.options.length; i++) {
                const opt = q.options[i];
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option-item';
                if (answers[q.id] === opt.value) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.onclick = (function(qId, val) {
                    return function() { selectOption(qId, val); };
                })(q.id, opt.value);
                
                const markerDiv = document.createElement('div');
                markerDiv.className = 'option-marker';
                
                const spanLabel = document.createElement('span');
                spanLabel.innerText = opt.label;
                
                const spanNote = document.createElement('span');
                spanNote.className = 'energy-note';
                spanNote.innerText = opt.energyNote;
                
                optionDiv.appendChild(markerDiv);
                optionDiv.appendChild(spanLabel);
                optionDiv.appendChild(spanNote);
                
                optionsContainer.appendChild(optionDiv);
            }
            
            document.getElementById('prevBtn').disabled = index === 0;
            
            const nextBtn = document.getElementById('nextBtn');
            if (index === questions.length - 1) {
                nextBtn.innerText = 'æŸ¥çœ‹ç»“æœ â†’';
            } else {
                nextBtn.innerText = 'ä¸‹ä¸€é¢˜ â†’';
            }
        }

        window.selectOption = function(questionId, value) {
            answers[questionId] = value;
            
            const options = document.querySelectorAll('.option-item');
            const currentQ = questions[currentQuestionIndex];
            for (let i = 0; i < options.length; i++) {
                if (currentQ.options[i].value === value) {
                    options[i].classList.add('selected');
                } else {
                    options[i].classList.remove('selected');
                }
            }
            
            updateProgress();
            
            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(function() {
                    nextQuestion();
                }, 400);
            }
        };

        window.prevQuestion = function() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
                updateProgress();
            }
        };

        window.nextQuestion = function() {
            if (!answers[questions[currentQuestionIndex].id]) {
                document.querySelector('.question-section').classList.add('shake');
                setTimeout(function() {
                    document.querySelector('.question-section').classList.remove('shake');
                }, 300);
                return;
            }
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
                updateProgress();
            } else {
                calculateAndSaveResults();
                showPage('result');
            }
        };

        function updateProgress() {
            let answeredCount = 0;
            for (let key in answers) {
                if (answers.hasOwnProperty(key)) answeredCount++;
            }
            const progress = (answeredCount / questions.length) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('energyPercentage').innerHTML = 'èƒ½é‡é‡Šæ”¾ ' + Math.round(progress) + '%';
        }

        function calculateAndSaveResults() {
            if (Object.keys(answers).length < 25) return;
            
            // äº”ç»´åº¦å¾—åˆ†è®¡ç®—
            let emotionSum = 0, emotionCount = 0;
            let unfinishedSum = 0, unfinishedCount = 0;
            let loyaltySum = 0, loyaltyCount = 0;
            let secretSum = 0, secretCount = 0;
            let chakraSum = 0, chakraCount = 0;
            
            for (let i = 0; i < questions.length; i++) {
                const q = questions[i];
                const score = answers[q.id];
                if (score) {
                    if (q.dimension === 'emotion') {
                        emotionSum += score;
                        emotionCount++;
                    } else if (q.dimension === 'unfinished') {
                        unfinishedSum += score;
                        unfinishedCount++;
                    } else if (q.dimension === 'loyalty') {
                        loyaltySum += score;
                        loyaltyCount++;
                    } else if (q.dimension === 'secret') {
                        secretSum += score;
                        secretCount++;
                    } else if (q.dimension === 'chakra') {
                        chakraSum += score;
                        chakraCount++;
                    }
                }
            }
            
            // å„ç»´åº¦å¹³å‡åˆ† (1-5åˆ†)
            const emotion = emotionSum / emotionCount;
            const unfinished = unfinishedSum / unfinishedCount;
            const loyalty = loyaltySum / loyaltyCount;
            const secret = secretSum / secretCount;
            const chakra = chakraSum / chakraCount;
            
            // æ€»åˆ† = äº”ç»´å¹³å‡ * 5 (èŒƒå›´5-25åˆ†)
            const total = (emotion + unfinished + loyalty + secret + chakra);
            
            const result = {
                emotion: emotion,
                unfinished: unfinished,
                loyalty: loyalty,
                secret: secret,
                chakra: chakra,
                total: total,
                answers: answers,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('ancestorKarmaResult', JSON.stringify(result));
        }

        // ==================== ç»“æœé¡µé€»è¾‘ - å¢å¼ºç‰ˆ ====================
        function displayResults() {
            const resultStr = localStorage.getItem('ancestorKarmaResult');
            if (!resultStr) return;
            
            const result = JSON.parse(resultStr);
            
            const total = result.total;
            document.getElementById('totalScore').innerHTML = total.toFixed(1);
            
            // ç¡®å®šç±»å‹å’Œæè¿°
            let type = '', typeDesc = '';
            if (total <= 10) {
                type = 'è‡ªç”±ä¹‹å­ Â· è½»ç›ˆå‹';
                typeDesc = 'ç¥–å…ˆç¥ç¦å¤§äºä¸šåŠ›è´Ÿæ‹…ï¼Œä½ ä¸»è¦æ‰¿æ¥çš„æ˜¯å®¶æ—çš„èƒ½é‡é¦ˆèµ ';
            } else if (total <= 15) {
                type = 'æ¸…é†’è¡Œè€… Â· è§‰å¯Ÿå‹';
                typeDesc = 'éƒ¨åˆ†å®¶æ—æ¨¡å¼éœ€è¦è§‰å¯Ÿï¼ŒæŸäº›é¢†åŸŸæœ‰æ˜æ˜¾èƒ½é‡å°è®°';
            } else if (total <= 20) {
                type = 'å¿ è¯šèƒŒè´Ÿè€… Â· è´Ÿé‡å‹';
                typeDesc = 'ä½ èƒŒè´Ÿäº†è¾ƒå¤šå®¶æ—èƒ½é‡ï¼ŒæŸäº›äººç”Ÿé€‰æ‹©å—åˆ°æ·±å±‚å½±å“';
            } else {
                type = 'èƒ½é‡å›šå¾’ Â· çº ç¼ å‹';
                typeDesc = 'æ·±åº¦çº ç¼ åœ¨å®¶æ—ç³»ç»Ÿä¸­ï¼Œè®¸å¤šæƒ…ç»ªå’Œé€‰æ‹©éƒ½ä¸æ˜¯â€œä½ â€çš„';
            }
            document.getElementById('karmaType').innerHTML = type;
            document.getElementById('energyLevelDesc').innerHTML = typeDesc;
            
            // ç”Ÿæˆäº”ç»´å¡ç‰‡
            generateDimensionCards(result);
            
            // ç”Ÿæˆè„‰è½®å›¾
            generateChakraGrid(result);
            
            // ç”Ÿæˆèƒ½é‡åœºæè¿°
            generateEnergyField(result);
            
            // ç”Ÿæˆå½±å“åˆ—è¡¨
            generateInfluenceList(result);
            
            // ç”Ÿæˆå µå¡ç‚¹
            generateBlockagePoints(result);
            
            // ç»˜åˆ¶é›·è¾¾å›¾
            drawRadarChart(result);
        }

        function generateDimensionCards(result) {
            const dimensions = [
                { key: 'emotion', name: 'æƒ…æ„Ÿç»§æ‰¿', icon: 'ğŸ”—', score: result.emotion },
                { key: 'unfinished', name: 'æœªç«Ÿäº‹ä»¶', icon: 'ğŸŒ€', score: result.unfinished },
                { key: 'loyalty', name: 'å¿ è¯šä»£ä»·', icon: 'âš–ï¸', score: result.loyalty },
                { key: 'secret', name: 'å®¶æ—ç§˜å¯†', icon: 'ğŸ”’', score: result.secret },
                { key: 'chakra', name: 'è„‰è½®å°è®°', icon: 'âš¡', score: result.chakra }
            ];
            
            let html = '';
            for (let i = 0; i < dimensions.length; i++) {
                const dim = dimensions[i];
                let level = '', levelClass = '';
                if (dim.score <= 1.5) { level = 'æä½'; levelClass = 'level-verylow'; }
                else if (dim.score <= 2.5) { level = 'è¾ƒä½'; levelClass = 'level-low'; }
                else if (dim.score <= 3.5) { level = 'ä¸­ç­‰'; levelClass = 'level-medium'; }
                else if (dim.score <= 4.5) { level = 'è¾ƒé«˜'; levelClass = 'level-high'; }
                else { level = 'æé«˜'; levelClass = 'level-veryhigh'; }
                
                html += '<div class="dimension-result-card">' +
                    '<div class="dimension-icon">' + dim.icon + '</div>' +
                    '<div class="dimension-name">' + dim.name + '</div>' +
                    '<div class="dimension-score">' + dim.score.toFixed(1) + '</div>' +
                    '<div class="dimension-level ' + levelClass + '">' + level + '</div>' +
                '</div>';
            }
            document.getElementById('dimensionCards').innerHTML = html;
        }

        function generateChakraGrid(result) {
            const chakras = [
                { name: 'æ ¹è½®', color: '#ff4444', emoji: 'ğŸŸ¥' },
                { name: 'è„è½®', color: '#ff8800', emoji: 'ğŸŸ§' },
                { name: 'å¤ªé˜³è½®', color: '#ffcc00', emoji: 'ğŸŸ¨' },
                { name: 'å¿ƒè½®', color: '#44ff44', emoji: 'ğŸŸ©' },
                { name: 'å–‰è½®', color: '#4444ff', emoji: 'ğŸŸ¦' },
                { name: 'çœ‰å¿ƒè½®', color: '#8844ff', emoji: 'ğŸŸª' },
                { name: 'é¡¶è½®', color: '#ff44ff', emoji: 'ğŸ’œ' }
            ];
            
            // æ ¹æ®è„‰è½®å°è®°åˆ†æ•°å’Œéšæœºå› å­ç”Ÿæˆä¸åŒé€æ˜åº¦
            let html = '';
            for (let i = 0; i < chakras.length; i++) {
                const chakra = chakras[i];
                // ä½¿ç”¨chakraåˆ†æ•°ä¸ºåŸºç¡€ï¼ŒåŠ ä¸Šä¸€äº›éšæœºå˜åŒ–ï¼Œè®©æ¯ä¸ªè„‰è½®ç•¥æœ‰ä¸åŒ
                const baseScore = result.chakra;
                // ä¸åŒè„‰è½®å—å½±å“ç¨‹åº¦ä¸åŒ
                let factor = 0.3 + (i * 0.1);
                if (factor > 0.8) factor = 0.8;
                const chakraScore = Math.min(1, (baseScore / 5) * (0.7 + factor));
                
                html += '<div class="chakra-item">' +
                    '<div class="chakra-circle" style="background: ' + chakra.color + '; opacity: ' + chakraScore + ';">' + chakra.emoji + '</div>' +
                    '<div class="chakra-name">' + chakra.name + '</div>' +
                '</div>';
            }
            document.getElementById('chakraGrid').innerHTML = html;
        }

        function generateEnergyField(result) {
            const total = result.total;
            
            // èƒ½é‡åœºçŠ¶æ€
            let fieldState = '';
            if (total <= 10) {
                fieldState = 'ä½ çš„èƒ½é‡åœºæ•´ä½“æ˜äº®æ¸…æ™°ï¼Œä¸­å¿ƒç¨³å®šï¼Œå‘ˆç°é‡‘è‰²å…‰æ™•ã€‚å®¶æ—èƒ½é‡ä»¥ç¥ç¦çš„å½¢å¼ç¯ç»•åœ¨ä½ å‘¨å›´ï¼Œæ²¡æœ‰å½¢æˆçº ç¼ æˆ–å µå¡ã€‚ä½ çš„ä¸ªäººèƒ½é‡ä¸å®¶æ—èƒ½é‡æœ‰æ¸…æ™°çš„è¾¹ç•Œï¼Œæ—¢èƒ½æ‰¿æ¥ç¥–å…ˆçš„æ™ºæ…§ï¼Œåˆä¸è¢«å®¶æ—æ¨¡å¼æŸç¼šã€‚';
            } else if (total <= 15) {
                fieldState = 'ä½ çš„èƒ½é‡åœºæ•´ä½“æ˜äº®ï¼Œä½†æŸäº›åŒºåŸŸæœ‰æ·¡æ·¡çš„ç°è‰²å°è®°ï¼Œä¸»è¦åœ¨æƒ…ç»ªä¸­å¿ƒå’Œå…³ç³»å±‚é¢ã€‚å®¶æ—èƒ½é‡ä»¥ä¸çŠ¶è¿æ¥çš„æ–¹å¼å½±å“ç€ä½ ï¼Œéœ€è¦æ„è¯†å±‚é¢çš„è§‰å¯Ÿæ‰èƒ½åŒºåˆ†â€œä½ çš„â€å’Œâ€œå®¶æ—çš„â€ã€‚';
            } else if (total <= 20) {
                fieldState = 'ä½ çš„èƒ½é‡åœºæœ‰æ˜æ˜¾æš—åŒºï¼Œå°¤å…¶åœ¨æ ¹è½®å’Œå¿ƒè½®ä½ç½®ã€‚å®¶æ—èƒ½é‡ä»¥ç²—é‡çš„çº¿æ¡ä¸ä½ çº ç¼ ï¼Œå½¢æˆèƒ½é‡ç‰µæ‹‰ã€‚ä½ ç»å¸¸æ„Ÿåˆ°è«åçš„æƒ…ç»ªå’Œé‡å¤çš„å‘½è¿æ¨¡å¼ï¼Œè¿™äº›æ˜¯å®¶æ—èƒ½é‡åœ¨é€šè¿‡ä½ è¡¨è¾¾ã€‚';
            } else {
                fieldState = 'ä½ çš„èƒ½é‡åœºä¸¥é‡æ·¤å µï¼Œè¾¹ç•Œæ¨¡ç³Šä¸æ¸…ã€‚ä½ æ‰¿æ¥äº†å¤§é‡å®¶æ—æœªç«Ÿäº‹ä»¶å’Œåˆ›ä¼¤èƒ½é‡ï¼Œè¿™äº›èƒ½é‡åœ¨ä½ çš„èƒ½é‡åœºä¸­å½¢æˆâ€œèƒ½é‡ç»“èŠ‚â€ï¼Œå½±å“ç€ä½ ç”Ÿæ´»çš„å„ä¸ªæ–¹é¢ã€‚ä½ çš„è®¸å¤šæƒ…ç»ªã€é€‰æ‹©ã€ç”šè‡³èº«ä½“æ„Ÿå—éƒ½ä¸æ˜¯ä½ è‡ªå·±çš„ã€‚';
            }
            document.getElementById('energyFieldState').innerHTML = fieldState;
            
            // çº ç¼ ç‚¹
            let entanglement = '';
            if (result.emotion > 3.5) entanglement += 'æƒ…æ„Ÿç»§æ‰¿ç»´åº¦æ˜æ˜¾ï¼Œä¸»è¦çº ç¼ åœ¨æ¯ç³»å®¶æ—çš„æƒ…ç»ªæ¨¡å¼ä¸Šã€‚';
            if (result.unfinished > 3.5) entanglement += 'æœªç«Ÿäº‹ä»¶ç»´åº¦æ˜æ˜¾ï¼Œä¸»è¦çº ç¼ åœ¨ç¥–è¾ˆç»å†çš„åˆ›ä¼¤äº‹ä»¶ä¸Šã€‚';
            if (result.loyalty > 3.5) entanglement += 'å¿ è¯šä»£ä»·ç»´åº¦æ˜æ˜¾ï¼Œä½ é€šè¿‡é‡å¤å®¶æ—å‘½è¿æ¥è¡¨è¾¾å¿ è¯šã€‚';
            if (result.secret > 3.5) entanglement += 'å®¶æ—ç§˜å¯†ç»´åº¦æ˜æ˜¾ï¼Œä½ åœ¨æ— æ„è¯†ä¸­å®ˆæŠ¤ç€å®¶æ—çš„ç§˜å¯†èƒ½é‡ã€‚';
            if (result.chakra > 3.5) entanglement += 'è„‰è½®å°è®°ç»´åº¦æ˜æ˜¾ï¼Œä½ çš„èƒ½é‡ä¸­å¿ƒæœ‰å®¶æ—èƒ½é‡çš„å µå¡å°è®°ã€‚';
            
            if (entanglement === '') {
                entanglement = 'æ— æ˜æ˜¾å®¶æ—èƒ½é‡çº ç¼ ï¼Œä½ ä¸å®¶æ—çš„èƒ½é‡è¿æ¥å¥åº·è€Œæ¸…æ™°ã€‚';
            }
            document.getElementById('energyEntanglement').innerHTML = entanglement;
        }

        function generateInfluenceList(result) {
            let html = '';
            
            if (result.emotion > 3) {
                html += '<li><span class="influence-icon">ğŸ”—</span> æƒ…ç»ªæ¨¡å¼å—å®¶æ—å½±å“ï¼Œå¸¸æ„Ÿå—åˆ°ä¸å±äºè‡ªå·±çš„æƒ…ç»ªæ³¢åŠ¨ï¼Œå°¤å…¶åœ¨å®¶æ—èšä¼šåèƒ½é‡æ¶ˆè€—æ˜æ˜¾ã€‚</li>';
            }
            if (result.unfinished > 3) {
                html += '<li><span class="influence-icon">ğŸŒ€</span> å®¶æ—æœªç«Ÿäº‹ä»¶åœ¨èƒ½é‡å±‚é¢å½±å“ç€ä½ ï¼Œä½ å¯èƒ½å¯¹æŸäº›å†å²æ—¶æœŸæœ‰è«åçš„æƒ…ç»ªååº”ã€‚</li>';
            }
            if (result.loyalty > 3) {
                html += '<li><span class="influence-icon">âš–ï¸</span> å‡ºäºå¯¹å®¶æ—çš„å¿ è¯šï¼Œä½ æ— æ„è¯†ä¸­åœ¨é‡å¤æŸäº›å®¶æ—æˆå‘˜çš„å‘½è¿æ¨¡å¼ã€‚</li>';
            }
            if (result.secret > 3) {
                html += '<li><span class="influence-icon">ğŸ”’</span> å®¶æ—ç§˜å¯†çš„èƒ½é‡åœ¨ä½ æ½œæ„è¯†ä¸­è¿ä½œï¼Œå½±å“ç€ä½ çš„äººé™…å…³ç³»å’Œäººç”Ÿé€‰æ‹©ã€‚</li>';
            }
            if (result.chakra > 3) {
                html += '<li><span class="influence-icon">âš¡</span> å®¶æ—èƒ½é‡åœ¨ç‰¹å®šè„‰è½®å½¢æˆå°è®°ï¼Œå½±å“è¯¥è„‰è½®å¯¹åº”çš„ç”Ÿå‘½é¢†åŸŸåŠŸèƒ½ã€‚</li>';
            }
            
            // å…·ä½“å½±å“åˆ†æ
            if (result.emotion > 4) {
                html += '<li><span class="influence-icon">ğŸ’­</span> ä½ å¯èƒ½æ˜¯å®¶æ—æƒ…ç»ªçš„â€œæ‰¿æ¥è€…â€ï¼Œæ‰¿æ‹…ç€æœªè¢«è¡¨è¾¾çš„æƒ…æ„Ÿï¼Œè¿™åœ¨èƒ½é‡å±‚é¢å½¢æˆäº†å¿ƒè½®å µå¡ã€‚</li>';
            }
            if (result.loyalty > 4 && result.unfinished > 4) {
                html += '<li><span class="influence-icon">ğŸ”„</span> ä½ æ­£å¤„åœ¨ä¸€ä¸ªé‡è¦çš„å®¶æ—èƒ½é‡å¾ªç¯ä¸­ï¼ŒæŸäº›äººç”Ÿé‡å¤§äº‹ä»¶ï¼ˆå©šå§»ã€äº‹ä¸šè½¬æŠ˜ï¼‰å¯èƒ½å—åˆ°å®¶æ—æ¨¡å¼çš„ç‰µå¼•ã€‚</li>';
            }
            if (result.secret > 4) {
                html += '<li><span class="influence-icon">ğŸ¤</span> å®¶æ—ç§˜å¯†çš„èƒ½é‡åœ¨ä½ å–‰è½®å½¢æˆå‹åˆ¶ï¼Œå½±å“ä½ è¡¨è¾¾çœŸå®è‡ªæˆ‘çš„èƒ½åŠ›ã€‚</li>';
            }
            
            if (html === '') {
                html = '<li><span class="influence-icon">âœ¨</span> å®¶æ—èƒ½é‡å¯¹ä½ çš„å½±å“ä¸»è¦æ˜¯ç¥ç¦è€Œéè´Ÿæ‹…ï¼Œä½ æœ‰èƒ½åŠ›æ´»å‡ºç‹¬ç«‹è‡ªä¸»çš„äººç”Ÿã€‚</li>';
            }
            
            document.getElementById('influenceList').innerHTML = html;
        }

        function generateBlockagePoints(result) {
            let html = '';
            
            if (result.chakra > 3) {
                if (result.emotion > 3.5) {
                    html += '<div class="blockage-item">â¤ï¸ å¿ƒè½®åŒºåŸŸæœ‰æƒ…ç»ªèƒ½é‡æ·¤å µï¼Œè¡¨ç°ä¸ºè¿‡åº¦æ‰¿æ‹…ä»–äººæƒ…ç»ªã€éš¾ä»¥å»ºç«‹äº²å¯†å…³ç³»ã€‚</div>';
                }
                if (result.loyalty > 3.5) {
                    html += '<div class="blockage-item">ğŸŸ¡ å¤ªé˜³ç¥ç»ä¸›æœ‰å¿ è¯šæ¨¡å¼å µå¡ï¼Œè¡¨ç°ä¸ºè‡ªæˆ‘ä»·å€¼æ„Ÿä½ã€ä¸æ•¢æ´»å‡ºçœŸæ­£çš„è‡ªå·±ã€‚</div>';
                }
                if (result.secret > 3.5) {
                    html += '<div class="blockage-item">ğŸ”µ å–‰è½®æœ‰ç§˜å¯†èƒ½é‡å‹åˆ¶ï¼Œè¡¨ç°ä¸ºä¸æ•¢è¯´çœŸè¯ã€è¡¨è¾¾å—é˜»ã€‚</div>';
                }
                if (result.unfinished > 3.5) {
                    html += '<div class="blockage-item">ğŸ”´ æ ¹è½®æœ‰æœªç«Ÿäº‹ä»¶å°è®°ï¼Œè¡¨ç°ä¸ºè«åçš„ç”Ÿå­˜ææƒ§ã€ç¼ºä¹å®‰å…¨æ„Ÿã€‚</div>';
                }
            }
            
            if (result.emotion > 4.5 && result.loyalty > 4.5) {
                html += '<div class="blockage-item">âš ï¸ æƒ…æ„Ÿç»§æ‰¿ä¸å¿ è¯šä»£ä»·å½¢æˆèƒ½é‡é—­ç¯ï¼Œä½ å¯èƒ½åœ¨é‡å¤â€œæ‹¯æ•‘è€…-å—å®³è€…â€çš„å®¶æ—å‰§æœ¬ã€‚</div>';
            }
            
            if (html === '') {
                html = '<div class="blockage-item">âœ… æœªæ£€æµ‹åˆ°æ˜æ˜¾èƒ½é‡å µå¡ï¼Œå®¶æ—èƒ½é‡æµåŠ¨é¡ºç•…ã€‚</div>';
            }
            
            document.getElementById('blockagePoints').innerHTML = html;
        }

        function drawRadarChart(result) {
            const canvas = document.getElementById('radarChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, 350, 350);
            
            const centerX = 175, centerY = 175, radius = 130;
            const angles = [0, 72, 144, 216, 288].map(function(deg) { return deg * Math.PI / 180; });
            
            // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
            for (let level = 1; level <= 5; level++) {
                ctx.beginPath();
                ctx.strokeStyle = 'rgba(212, 175, 55, ' + (0.1 + level * 0.03) + ')';
                ctx.lineWidth = 1;
                
                const r = (radius * level) / 5;
                for (let i = 0; i < angles.length; i++) {
                    const x = centerX + r * Math.cos(angles[i] - Math.PI/2);
                    const y = centerY + r * Math.sin(angles[i] - Math.PI/2);
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }
            
            // ç»˜åˆ¶è½´çº¿
            ctx.strokeStyle = 'rgba(212, 175, 55, 0.3)';
            ctx.lineWidth = 1;
            for (let i = 0; i < angles.length; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                const x = centerX + radius * Math.cos(angles[i] - Math.PI/2);
                const y = centerY + radius * Math.sin(angles[i] - Math.PI/2);
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ•°æ®
            const scores = [
                result.emotion / 5 * radius,
                result.unfinished / 5 * radius,
                result.loyalty / 5 * radius,
                result.secret / 5 * radius,
                result.chakra / 5 * radius
            ];
            
            ctx.beginPath();
            ctx.fillStyle = 'rgba(212, 175, 55, 0.25)';
            ctx.strokeStyle = '#d4af37';
            ctx.lineWidth = 3;
            ctx.shadowColor = '#d4af37';
            ctx.shadowBlur = 15;
            
            for (let i = 0; i < angles.length; i++) {
                const x = centerX + scores[i] * Math.cos(angles[i] - Math.PI/2);
                const y = centerY + scores[i] * Math.sin(angles[i] - Math.PI/2);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            ctx.shadowBlur = 0;
            
            // ç»˜åˆ¶æ•°æ®ç‚¹
            for (let i = 0; i < angles.length; i++) {
                const x = centerX + scores[i] * Math.cos(angles[i] - Math.PI/2);
                const y = centerY + scores[i] * Math.sin(angles[i] - Math.PI/2);
                
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, 2 * Math.PI);
                ctx.fillStyle = '#d4af37';
                ctx.shadowColor = '#d4af37';
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.shadowBlur = 0;
            }
            
            // æ·»åŠ æ ‡ç­¾
            const labels = ['æƒ…æ„Ÿç»§æ‰¿', 'æœªç«Ÿäº‹ä»¶', 'å¿ è¯šä»£ä»·', 'å®¶æ—ç§˜å¯†', 'è„‰è½®å°è®°'];
            for (let i = 0; i < angles.length; i++) {
                const x = centerX + (radius + 30) * Math.cos(angles[i] - Math.PI/2);
                const y = centerY + (radius + 30) * Math.sin(angles[i] - Math.PI/2);
                
                ctx.font = '12px "PingFang SC"';
                ctx.fillStyle = '#d4af37';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(labels[i], x, y);
            }
        }

        // ==================== å·¥å…·å‡½æ•° ====================
        window.copyWechat = function() {
            const wechatId = 'lfhy771';
            
            // å°è¯•ä½¿ç”¨ç°ä»£clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(wechatId).then(function() {
                    alert('å¾®ä¿¡å·å·²å¤åˆ¶ï¼š' + wechatId + '\n\nè¯·å‰å¾€å¾®ä¿¡æ·»åŠ å¥½å‹è·å–æ·±åº¦è§£è¯»');
                }).catch(function() {
                    // é™çº§æ–¹æ¡ˆ
                    fallbackCopy();
                });
            } else {
                // é™çº§æ–¹æ¡ˆ
                fallbackCopy();
            }
            
            function fallbackCopy() {
                const textarea = document.createElement('textarea');
                textarea.value = wechatId;
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    alert('å¾®ä¿¡å·å·²å¤åˆ¶ï¼š' + wechatId + '\n\nè¯·å‰å¾€å¾®ä¿¡æ·»åŠ å¥½å‹è·å–æ·±åº¦è§£è¯»');
                } catch (err) {
                    prompt('å¤åˆ¶å¾®ä¿¡å·ï¼š', wechatId);
                }
                document.body.removeChild(textarea);
            }
        };

        window.restartTest = function() {
            localStorage.removeItem('ancestorKarmaResult');
            showPage('start');
        };

        // åˆå§‹åŒ–èƒŒæ™¯ç²’å­
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            if (!particlesContainer) return;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 100 + 50;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.opacity = Math.random() * 0.1 + 0.05;
                particlesContainer.appendChild(particle);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            createParticles();
        });
    </script>
</body>
</html>